{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Szymon/Desktop/bezpiesniowy/src/lib/game.ts"],"sourcesContent":["export const SNIPPET_DURATIONS_SECONDS = [0.5, 1, 2, 5, 10] as const;\r\n\r\nexport const STAGE_SCORES = [10, 8, 6, 4, 2] as const;\r\n\r\nexport function scoreForStage(stageIndex: number, attempts: number): number {\r\n  const base = STAGE_SCORES[Math.min(stageIndex, STAGE_SCORES.length - 1)];\r\n  const penalty = Math.max(attempts - 1, 0);\r\n  return Math.max(base - penalty, 0);\r\n}\r\n\r\nexport function normalizeAnswer(answer: string): string {\r\n  return answer\r\n    .trim()\r\n    .toLowerCase()\r\n    .normalize(\"NFD\")\r\n    .replace(/ł/g, \"l\")\r\n    .replace(/Ł/g, \"l\")\r\n    .replace(/[\\u0300-\\u036f]/g, \"\")\r\n    .replace(/[^a-z0-9 ]/g, \"\")\r\n    .replace(/\\s+/g, \" \")\r\n    .trim();\r\n}\r\n\r\nexport function buildAcceptableAnswers(title: string, artist: string): string[] {\r\n  const normalizedTitle = normalizeAnswer(title);\r\n  const normalizedArtist = normalizeAnswer(artist);\r\n\r\n  const combos = [\r\n    normalizedTitle,\r\n    `${normalizedArtist} ${normalizedTitle}`.trim(),\r\n    `${normalizedTitle} ${normalizedArtist}`.trim(),\r\n    `${normalizedArtist}-${normalizedTitle}`.trim(),\r\n    `${normalizedTitle}-${normalizedArtist}`.trim(),\r\n  ];\r\n\r\n  return Array.from(new Set(combos.map(normalizeAnswer)));\r\n}\r\n\r\n"],"names":[],"mappings":";;;;;;;;;;;;AAAO,MAAM,4BAA4B;IAAC;IAAK;IAAG;IAAG;IAAG;CAAG;AAEpD,MAAM,eAAe;IAAC;IAAI;IAAG;IAAG;IAAG;CAAE;AAErC,SAAS,cAAc,UAAkB,EAAE,QAAgB;IAChE,MAAM,OAAO,YAAY,CAAC,KAAK,GAAG,CAAC,YAAY,aAAa,MAAM,GAAG,GAAG;IACxE,MAAM,UAAU,KAAK,GAAG,CAAC,WAAW,GAAG;IACvC,OAAO,KAAK,GAAG,CAAC,OAAO,SAAS;AAClC;AAEO,SAAS,gBAAgB,MAAc;IAC5C,OAAO,OACJ,IAAI,GACJ,WAAW,GACX,SAAS,CAAC,OACV,OAAO,CAAC,MAAM,KACd,OAAO,CAAC,MAAM,KACd,OAAO,CAAC,oBAAoB,IAC5B,OAAO,CAAC,eAAe,IACvB,OAAO,CAAC,QAAQ,KAChB,IAAI;AACT;AAEO,SAAS,uBAAuB,KAAa,EAAE,MAAc;IAClE,MAAM,kBAAkB,gBAAgB;IACxC,MAAM,mBAAmB,gBAAgB;IAEzC,MAAM,SAAS;QACb;QACA,GAAG,iBAAiB,CAAC,EAAE,iBAAiB,CAAC,IAAI;QAC7C,GAAG,gBAAgB,CAAC,EAAE,kBAAkB,CAAC,IAAI;QAC7C,GAAG,iBAAiB,CAAC,EAAE,iBAAiB,CAAC,IAAI;QAC7C,GAAG,gBAAgB,CAAC,EAAE,kBAAkB,CAAC,IAAI;KAC9C;IAED,OAAO,MAAM,IAAI,CAAC,IAAI,IAAI,OAAO,GAAG,CAAC;AACvC","debugId":null}},
    {"offset": {"line": 54, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Szymon/Desktop/bezpiesniowy/src/components/AudioGuessGame.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useCallback, useEffect, useMemo, useRef, useState } from \"react\";\r\nimport { SNIPPET_DURATIONS_SECONDS } from \"@/lib/game\";\r\n\r\ntype Hint = {\r\n  stage: number;\r\n  label: string;\r\n  value: string;\r\n};\r\n\r\ntype SongChallenge = {\r\n  songId: number;\r\n  audioUrl: string;\r\n  hints: Hint[];\r\n  snippetDurations: number[];\r\n};\r\n\r\nconst FALLBACK_DURATIONS = SNIPPET_DURATIONS_SECONDS.map((value) => Number(value));\r\n\r\nfunction formatDurationLabel(duration: number) {\r\n  if (duration < 1) {\r\n    return `${Math.round(duration * 10) / 10} s`;\r\n  }\r\n  return `${duration} s`;\r\n}\r\n\r\ninterface GuessResult {\r\n  correct: boolean;\r\n  score: number;\r\n  message: string;\r\n  answer?: {\r\n    title: string;\r\n    artist: string;\r\n  };\r\n}\r\n\r\nexport function AudioGuessGame() {\r\n  const [challenge, setChallenge] = useState<SongChallenge | null>(null);\r\n  const [maxUnlockedStage, setMaxUnlockedStage] = useState(0);\r\n  const [attempts, setAttempts] = useState(0);\r\n  const [guess, setGuess] = useState(\"\");\r\n  const [loadingChallenge, setLoadingChallenge] = useState(false);\r\n  const [feedback, setFeedback] = useState<GuessResult | null>(null);\r\n  const [totalScore, setTotalScore] = useState(0);\r\n  const [streak, setStreak] = useState(0);\r\n  const [history, setHistory] = useState<GuessResult[]>([]);\r\n  const [error, setError] = useState<string | null>(null);\r\n  const [isPlaying, setIsPlaying] = useState(false);\r\n  const [stageBeingPlayed, setStageBeingPlayed] = useState<number | null>(null);\r\n\r\n  const audioRef = useRef<HTMLAudioElement | null>(null);\r\n  const playTimeoutRef = useRef<ReturnType<typeof setTimeout> | null>(null);\r\n\r\n  const durations = useMemo(\r\n    () => challenge?.snippetDurations ?? FALLBACK_DURATIONS,\r\n    [challenge?.snippetDurations],\r\n  );\r\n\r\n  const resetAudio = useCallback(() => {\r\n    if (playTimeoutRef.current) {\r\n      clearTimeout(playTimeoutRef.current);\r\n      playTimeoutRef.current = null;\r\n    }\r\n    if (audioRef.current) {\r\n      audioRef.current.pause();\r\n      audioRef.current.currentTime = 0;\r\n    }\r\n    setIsPlaying(false);\r\n    setStageBeingPlayed(null);\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    return () => {\r\n      resetAudio();\r\n      if (audioRef.current) {\r\n        audioRef.current.src = \"\";\r\n        audioRef.current.load();\r\n      }\r\n    };\r\n  }, [resetAudio]);\r\n\r\n  const loadChallenge = useCallback(async () => {\r\n    setLoadingChallenge(true);\r\n    setError(null);\r\n    setFeedback(null);\r\n    setGuess(\"\");\r\n    setAttempts(0);\r\n    setMaxUnlockedStage(0);\r\n    resetAudio();\r\n\r\n    try {\r\n      const response = await fetch(\"/api/songs/random\");\r\n      const data = (await response.json().catch(() => ({}))) as Partial<SongChallenge> & {\r\n        message?: string;\r\n      };\r\n      if (!response.ok) {\r\n        throw new Error(data.message ?? \"Nie udało się pobrać piosenki\");\r\n      }\r\n      if (!data.songId || !data.audioUrl) {\r\n        throw new Error(\"Brak danych o piosence\");\r\n      }\r\n      setChallenge({\r\n        songId: data.songId,\r\n        audioUrl: data.audioUrl,\r\n        hints: data.hints ?? [],\r\n        snippetDurations: data.snippetDurations ?? FALLBACK_DURATIONS,\r\n        // include title/artist from API so we can show correct answer on skip\r\n        // @ts-ignore\r\n        title: data.title ?? undefined,\r\n        // @ts-ignore\r\n        artist: data.artist ?? undefined,\r\n      } as any);\r\n      if (audioRef.current) {\r\n        audioRef.current.src = \"\";\r\n      }\r\n      const audio = new Audio(data.audioUrl);\r\n      audioRef.current = audio;\r\n      audio.addEventListener(\"ended\", () => {\r\n        setIsPlaying(false);\r\n        setStageBeingPlayed(null);\r\n      });\r\n    } catch (err) {\r\n      console.error(err);\r\n      setError(err instanceof Error ? err.message : \"Nieznany błąd\");\r\n    } finally {\r\n      setLoadingChallenge(false);\r\n    }\r\n  }, [resetAudio]);\r\n\r\n  useEffect(() => {\r\n    loadChallenge();\r\n  }, [loadChallenge]);\r\n\r\n  const handlePlayStage = useCallback(\r\n    async (stageIndex: number) => {\r\n      if (!challenge || stageIndex > maxUnlockedStage) {\r\n        return;\r\n      }\r\n\r\n      try {\r\n        resetAudio();\r\n\r\n        const audio = audioRef.current ?? new Audio(challenge.audioUrl);\r\n        if (!audioRef.current) {\r\n          audioRef.current = audio;\r\n        } else if (!audioRef.current.src.includes(challenge.audioUrl)) {\r\n          audioRef.current.src = challenge.audioUrl;\r\n          audioRef.current.load();\r\n        }\r\n\r\n        setIsPlaying(true);\r\n        setStageBeingPlayed(stageIndex);\r\n\r\n        audio.currentTime = 0;\r\n        await audio.play();\r\n\r\n        const duration = durations[stageIndex] ?? FALLBACK_DURATIONS[stageIndex] ?? 2;\r\n\r\n        playTimeoutRef.current = setTimeout(() => {\r\n          audio.pause();\r\n          audio.currentTime = 0;\r\n          setIsPlaying(false);\r\n          setStageBeingPlayed(null);\r\n          setMaxUnlockedStage((prev) => Math.max(prev, stageIndex + 1));\r\n        }, duration * 1000);\r\n      } catch (err) {\r\n        console.error(\"Audio play error\", err);\r\n        setError(\"Nie udało się odtworzyć fragmentu. Spróbuj ponownie.\");\r\n        resetAudio();\r\n      }\r\n    },\r\n    [challenge, durations, maxUnlockedStage, resetAudio],\r\n  );\r\n\r\n  const submitGuess = useCallback(\r\n    async (event: React.FormEvent<HTMLFormElement>) => {\r\n      event.preventDefault();\r\n      if (!challenge || !guess.trim()) {\r\n        return;\r\n      }\r\n\r\n      const nextAttempts = attempts + 1;\r\n      setAttempts(nextAttempts);\r\n      setError(null);\r\n\r\n      try {\r\n        const response = await fetch(\"/api/songs/guess\", {\r\n          method: \"POST\",\r\n          headers: { \"Content-Type\": \"application/json\" },\r\n          body: JSON.stringify({\r\n            songId: challenge.songId,\r\n            guess,\r\n            stageIndex: Math.max(maxUnlockedStage - 1, 0),\r\n            attempts: nextAttempts,\r\n          }),\r\n        });\r\n\r\n        const result = (await response.json()) as GuessResult;\r\n        setFeedback(result);\r\n\r\n        if (!response.ok) {\r\n          setError(result.message ?? \"Błąd podczas sprawdzania odpowiedzi\");\r\n          return;\r\n        }\r\n\r\n        if (result.correct) {\r\n          setTotalScore((prev) => prev + result.score);\r\n          setStreak((prev) => prev + 1);\r\n          setHistory((prev) => [\r\n            {\r\n              ...result,\r\n              message: `${result.message} (${result.answer?.artist ?? \"\"} – ${result.answer?.title ?? \"\"})`,\r\n            },\r\n            ...prev,\r\n          ]);\r\n          resetAudio();\r\n        } else {\r\n          setStreak(0);\r\n        }\r\n      } catch (err) {\r\n        console.error(\"Guess submit error\", err);\r\n        setError(\"Coś poszło nie tak. Spróbuj ponownie za chwilę.\");\r\n      }\r\n    },\r\n    [attempts, challenge, guess, maxUnlockedStage, resetAudio],\r\n  );\r\n\r\n  const handleNextSong = useCallback(() => {\r\n    loadChallenge();\r\n  }, [loadChallenge]);\r\n\r\n  const canAdvance = challenge && maxUnlockedStage < durations.length;\r\n\r\n  return (\r\n    <section className=\"grid gap-6 rounded-2xl border border-white/10 bg-white/70 p-6 shadow-lg backdrop-blur-sm transition dark:border-white/5 dark:bg-slate-900/70\">\r\n      <header className=\"flex flex-col gap-2\">\r\n        <h2 className=\"text-2xl font-semibold tracking-tight text-slate-900 dark:text-white\">\r\n          Zgadnij polski utwór\r\n        </h2>\r\n        <p className=\"text-sm text-slate-600 dark:text-slate-300\">\r\n          Odtwarzaj coraz dłuższe fragmenty (0.5s → 10s), zgadnij tytuł piosenki i zbieraj punkty.\r\n        </p>\r\n        {error && <p className=\"rounded-md bg-red-100 px-3 py-2 text-sm text-red-800 dark:bg-red-900/40 dark:text-red-200\">{error}</p>}\r\n      </header>\r\n\r\n      <div className=\"grid gap-3\">\r\n        <h3 className=\"text-sm font-semibold uppercase tracking-wide text-slate-500 dark:text-slate-400\">\r\n          Fragmenty audio\r\n        </h3>\r\n        <div className=\"flex flex-wrap gap-3\">\r\n          {durations.map((duration, index) => {\r\n            const unlocked = index <= maxUnlockedStage;\r\n            const active = stageBeingPlayed === index;\r\n            return (\r\n              <button\r\n                key={duration}\r\n                type=\"button\"\r\n                onClick={() => handlePlayStage(index)}\r\n                disabled={!unlocked || isPlaying}\r\n                className={`rounded-full border px-4 py-2 text-sm font-medium transition ${\r\n                  active\r\n                    ? \"border-emerald-500 bg-emerald-500 text-white shadow\"\r\n                    : unlocked\r\n                      ? \"border-emerald-500/40 text-emerald-600 hover:bg-emerald-500/10 dark:text-emerald-300\"\r\n                      : \"cursor-not-allowed border-slate-300 text-slate-400 opacity-60 dark:border-slate-700\"\r\n                }`}\r\n              >\r\n                {formatDurationLabel(duration)}\r\n              </button>\r\n            );\r\n          })}\r\n        </div>\r\n        {canAdvance && (\r\n          <p className=\"text-xs text-slate-500 dark:text-slate-400\">\r\n            Aby odblokować kolejny fragment, odsłuchaj obecny do końca.\r\n          </p>\r\n        )}\r\n      </div>\r\n\r\n      <div className=\"grid gap-2\">\r\n        <h3 className=\"text-sm font-semibold uppercase tracking-wide text-slate-500 dark:text-slate-400\">\r\n          Dostępne wskazówki\r\n        </h3>\r\n        <div className=\"grid gap-2\">\r\n          {challenge?.hints\r\n            ?.filter((hint) => maxUnlockedStage >= hint.stage)\r\n            .map((hint) => (\r\n              <div\r\n                key={hint.label}\r\n                className=\"flex items-center justify-between rounded-lg border border-emerald-500/10 bg-emerald-500/5 px-3 py-2 text-sm text-emerald-700 dark:border-emerald-400/20 dark:bg-emerald-400/10 dark:text-emerald-200\"\r\n              >\r\n                <span className=\"font-medium\">{hint.label}</span>\r\n                <span>{hint.value}</span>\r\n              </div>\r\n            ))}\r\n          {!challenge?.hints?.some((hint) => maxUnlockedStage >= hint.stage) && (\r\n            <p className=\"rounded-lg border border-dashed border-slate-400/50 px-3 py-2 text-sm text-slate-500 dark:border-slate-600 dark:text-slate-400\">\r\n              Odsłuchaj dłuższy fragment, aby odblokować wskazówki.\r\n            </p>\r\n          )}\r\n        </div>\r\n      </div>\r\n\r\n      <form onSubmit={submitGuess} className=\"grid gap-3\">\r\n        <label className=\"text-sm font-semibold uppercase tracking-wide text-slate-500 dark:text-slate-400\">\r\n          Twoja odpowiedź\r\n        </label>\r\n        <input\r\n          type=\"text\"\r\n          value={guess}\r\n          onChange={(event) => setGuess(event.target.value)}\r\n          placeholder=\"np. Cykady na Cykladach\"\r\n          className=\"w-full rounded-xl border border-slate-300 bg-white px-4 py-3 text-base shadow-sm focus:border-emerald-500 focus:outline-none focus:ring-2 focus:ring-emerald-400 dark:border-slate-700 dark:bg-slate-900 dark:text-white\"\r\n          disabled={feedback?.correct}\r\n        />\r\n        <div className=\"flex flex-wrap gap-3\">\r\n          <button\r\n            type=\"submit\"\r\n            disabled={!guess.trim() || !!feedback?.correct}\r\n            className=\"rounded-full bg-emerald-500 px-5 py-2 text-sm font-semibold text-white shadow transition hover:bg-emerald-600 disabled:opacity-60\"\r\n          >\r\n            Sprawdź odpowiedź\r\n          </button>\r\n          {feedback?.correct && (\r\n            <button\r\n              type=\"button\"\r\n              onClick={handleNextSong}\r\n              disabled={loadingChallenge}\r\n              className=\"rounded-full border border-emerald-400 px-5 py-2 text-sm font-semibold text-emerald-600 transition hover:bg-emerald-500/10 dark:text-emerald-300\"\r\n            >\r\n              Następna piosenka\r\n            </button>\r\n          )}\r\n          {!feedback?.correct && (\r\n            <button\r\n              type=\"button\"\r\n              onClick={() => {\r\n                // reveal correct answer for current challenge\r\n                if (challenge) {\r\n                  setFeedback({\r\n                    correct: false,\r\n                    score: 0,\r\n                    message: \"Pominięto — oto poprawna odpowiedź:\",\r\n                    answer: {\r\n                      title: (challenge as any).title ?? \"\",\r\n                      artist: (challenge as any).hints?.length ? ((challenge as any).hints.find((h:any)=>h.label.includes('Wykonawca'))?.value ?? '') : '' ,\r\n                    },\r\n                  });\r\n                }\r\n                resetAudio();\r\n              }}\r\n              disabled={loadingChallenge}\r\n              className=\"rounded-full border border-slate-300 px-5 py-2 text-sm font-semibold text-slate-700 transition hover:bg-slate-100 dark:border-slate-700 dark:text-slate-200 dark:hover:bg-slate-800\"\r\n            >\r\n              Pomiń utwór\r\n            </button>\r\n          )}\r\n        </div>\r\n      </form>\r\n\r\n      {feedback && (\r\n        <div\r\n          className={`rounded-xl border px-4 py-3 text-sm ${\r\n            feedback.correct\r\n              ? \"border-emerald-500/50 bg-emerald-500/10 text-emerald-700 dark:bg-emerald-500/10 dark:text-emerald-200\"\r\n              : \"border-red-500/50 bg-red-500/10 text-red-700 dark:bg-red-500/10 dark:text-red-200\"\r\n          }`}\r\n        >\r\n          <p className=\"font-semibold\">{feedback.message}</p>\r\n          {feedback.answer && (\r\n            <p className={`text-xs ${feedback.correct ? 'text-emerald-600 dark:text-emerald-200/80' : 'text-slate-700 dark:text-slate-200/80'}`}>\r\n              Poprawna odpowiedź: {feedback.answer.artist} – {feedback.answer.title}\r\n            </p>\r\n          )}\r\n          <p className=\"mt-1 text-xs text-slate-600 dark:text-slate-300\">Próby: {attempts}</p>\r\n          {feedback.correct && (\r\n            <p className=\"mt-1 text-xs text-slate-600 dark:text-slate-300\">Zdobyte punkty: {feedback.score}</p>\r\n          )}\r\n        </div>\r\n      )}\r\n\r\n      <footer className=\"grid gap-3 rounded-xl border border-slate-200/60 bg-slate-100/80 p-4 text-sm dark:border-slate-700 dark:bg-slate-900/60\">\r\n        <div className=\"flex flex-wrap items-center gap-4\">\r\n          <div className=\"flex flex-col\">\r\n            <span className=\"text-xs uppercase text-slate-500 dark:text-slate-400\">Łączny wynik</span>\r\n            <span className=\"text-lg font-semibold text-slate-900 dark:text-white\">{totalScore}</span>\r\n          </div>\r\n          <div className=\"flex flex-col\">\r\n            <span className=\"text-xs uppercase text-slate-500 dark:text-slate-400\">Seria</span>\r\n            <span className=\"text-lg font-semibold text-slate-900 dark:text-white\">{streak}</span>\r\n          </div>\r\n          <div className=\"flex flex-col\">\r\n            <span className=\"text-xs uppercase text-slate-500 dark:text-slate-400\">Próby w tej rundzie</span>\r\n            <span className=\"text-lg font-semibold text-slate-900 dark:text-white\">{attempts}</span>\r\n          </div>\r\n        </div>\r\n        {history.length > 0 && (\r\n          <div className=\"grid gap-2\">\r\n            <span className=\"text-xs uppercase text-slate-500 dark:text-slate-400\">Ostatnie trafienia</span>\r\n            <ul className=\"grid gap-2 text-xs text-slate-600 dark:text-slate-300\">\r\n              {history.slice(0, 3).map((item, index) => (\r\n                <li key={`${item.message}-${index}`} className=\"rounded-lg border border-slate-200/60 bg-white/80 px-3 py-2 dark:border-slate-700 dark:bg-slate-900/60\">\r\n                  {item.message}\r\n                </li>\r\n              ))}\r\n            </ul>\r\n          </div>\r\n        )}\r\n      </footer>\r\n    </section>\r\n  );\r\n}\r\n\r\n"],"names":[],"mappings":"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","debugId":null}}]
}